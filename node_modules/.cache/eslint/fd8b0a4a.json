[{"/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/main.ts":"1","/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/App.vue":"2","/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/router/index.ts":"3","/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/views/HomeView.vue":"4","/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/views/AboutView.vue":"5","/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/services/firebase.ts":"6","/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/components/SignIn.vue":"7","/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/components/SignUp.vue":"8","/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/views/SignInView.vue":"9","/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/views/SignUpView.vue":"10","/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/stores/global.ts":"11","/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/components/TheHeader.vue":"12","/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/views/MineView.vue":"13","/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/components/MineTable.vue":"14"},{"size":308,"mtime":1714110910261,"results":"15","hashOfConfig":"16"},{"size":625,"mtime":1714123551267,"results":"17","hashOfConfig":"16"},{"size":1491,"mtime":1714123455315,"results":"18","hashOfConfig":"16"},{"size":71,"mtime":1714123515634,"results":"19","hashOfConfig":"16"},{"size":89,"mtime":1714105876466,"results":"20","hashOfConfig":"16"},{"size":681,"mtime":1714130658491,"results":"21","hashOfConfig":"16"},{"size":1006,"mtime":1714123075977,"results":"22","hashOfConfig":"16"},{"size":1068,"mtime":1714123079708,"results":"23","hashOfConfig":"16"},{"size":118,"mtime":1714114736515,"results":"24","hashOfConfig":"16"},{"size":118,"mtime":1714115067503,"results":"25","hashOfConfig":"16"},{"size":917,"mtime":1714122690450,"results":"26","hashOfConfig":"16"},{"size":1220,"mtime":1714129507834,"results":"27","hashOfConfig":"16"},{"size":181,"mtime":1714129593822,"results":"28","hashOfConfig":"16"},{"size":2957,"mtime":1714180958734,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"v8e8mj",{"filePath":"33","messages":"34","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"35"},{"filePath":"36","messages":"37","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"38"},{"filePath":"39","messages":"40","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"41","messages":"42","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"44","messages":"45","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"46"},{"filePath":"47","messages":"48","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49"},{"filePath":"50","messages":"51","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"52"},{"filePath":"53","messages":"54","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"55"},{"filePath":"56","messages":"57","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"55"},{"filePath":"58","messages":"59","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"60"},{"filePath":"61","messages":"62","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63"},{"filePath":"64","messages":"65","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"66","messages":"67","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"68"},"/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/main.ts",[],[],"/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/App.vue",["69","70","71","72","73","74"],"<script setup lang=\"ts\">\n// https://ithelp.ithome.com.tw/articles/10336751\n\nimport TheHeader from \"@/components/TheHeader.vue\";\nimport { getAuth, onAuthStateChanged, signOut } from \"firebase/auth\";\nimport { ref, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\n</script>\n\n<template>\n  <TheHeader />\n  <router-view />\n</template>\n\n<style lang=\"scss\">\n@import \"@/assets/scss/root.scss\";\n@import \"@/assets/scss/reset.scss\";\n@import \"@/assets/scss/variables.scss\";\n\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n</style>\n","/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/router/index.ts",["75","76"],"import { createRouter, createWebHistory, RouteRecordRaw } from \"vue-router\";\nimport { useGlobalStore } from \"@/stores/global\";\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\n\nconst routes: Array<RouteRecordRaw> = [\n  {\n    path: \"/\",\n    name: \"home\",\n    component: () => import(\"../views/HomeView.vue\"),\n  },\n  {\n    path: \"/mine\",\n    name: \"mine\",\n    component: () => import(\"../views/MineView.vue\"),\n    meta: { requiresAuth: true },\n  },\n  {\n    path: \"/signIn\",\n    name: \"signIn\",\n    component: () => import(\"../views/SignInView.vue\"),\n    meta: { requiresAuth: false },\n  },\n  {\n    path: \"/signUp\",\n    name: \"signUp\",\n    component: () => import(\"../views/SignUpView.vue\"),\n    meta: { requiresAuth: false },\n  },\n];\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes,\n});\n\nconst getCurrentUser = () => {\n  return new Promise((resolve, reject) => {\n    const removeListener = onAuthStateChanged(\n      getAuth(),\n      (user) => {\n        removeListener();\n        resolve(user);\n      },\n      reject\n    );\n  });\n};\n\nrouter.beforeEach(async (to, from) => {\n  if (to.meta.requiresAuth && !(await getCurrentUser())) {\n    return {\n      path: \"/\",\n      query: { redirect: to.fullPath },\n    };\n  }\n});\n\nrouter.beforeEach(async (to, from, next) => {\n  const user = await getCurrentUser();\n\n  if (user && (to.name === \"signIn\" || to.name === \"signUp\")) {\n    next(\"/\");\n  } else {\n    next();\n  }\n});\n\nexport default router;\n","/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/views/HomeView.vue",[],"/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/views/AboutView.vue",[],[],"/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/services/firebase.ts",["77"],"import { initializeApp } from \"firebase/app\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getAnalytics } from \"firebase/analytics\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyB7QHg-QpznXhqsMWwz2jb_h0G-trSUs3M\",\n  authDomain: \"fire-db-4c2c1.firebaseapp.com\",\n  projectId: \"fire-db-4c2c1\",\n  storageBucket: \"fire-db-4c2c1.appspot.com\",\n  messagingSenderId: \"69901425522\",\n  appId: \"1:69901425522:web:33a8f1c36150d44ea69beb\",\n  measurementId: \"G-Y5XRF05BLR\",\n};\n\nconst app = initializeApp(firebaseConfig);\nconst analytics = getAnalytics(app);\n\nconsole.log(\"firebase~\", app);\n\nexport const setupFirebase = () => {\n  return app;\n};\n\nexport const db = getFirestore(app);\n","/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/components/SignIn.vue",["78","79","80"],"<template>\n  <div class=\"content\">\n    <h3>登入</h3>\n    <input type=\"text\" v-model=\"email\" placeholder=\"email\" />\n    <input type=\"text\" v-model=\"password\" placeholder=\"password\" />\n    <p>{{ msg }}</p>\n    <button v-on:click=\"signIn\">Send</button>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { getAuth, signInWithEmailAndPassword } from \"firebase/auth\";\n\nconst router = useRouter();\nconst email = ref(\"\");\nconst password = ref(\"\");\nconst msg: any = ref(\"\");\nconst auth = getAuth();\n\nconst signIn = () => {\n  signInWithEmailAndPassword(auth, email.value, password.value)\n    .then((userCredential) => {\n      const user = userCredential.user;\n\n      setTimeout(() => {\n        router.push(\"/mine\");\n      }, 2000);\n    })\n    .catch((error) => {\n      msg.value = \"登入失敗\";\n    });\n};\n</script>\n\n<style scoped lang=\"scss\">\n.content {\n  padding: 10px;\n  border: 1px solid #dddddd;\n  background-color: #f5f5f5;\n}\n</style>\n","/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/components/SignUp.vue",["81","82"],"<template>\n  <div class=\"content\">\n    <h3>註冊</h3>\n    <input type=\"text\" v-model=\"email\" placeholder=\"email\" />\n    <input type=\"text\" v-model=\"password\" placeholder=\"password\" />\n    <p>{{ msg }}</p>\n    <button v-on:click=\"signUp\">Send</button>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { getAuth, createUserWithEmailAndPassword } from \"firebase/auth\";\n\nconst router = useRouter();\nconst email = ref(\"\");\nconst password = ref(\"\");\nconst msg: any = ref(\"\");\nconst auth = getAuth();\n\nconst signUp = () => {\n  createUserWithEmailAndPassword(auth, email.value, password.value)\n    .then((userCredential) => {\n      setTimeout(() => {\n        router.push(\"/mine\");\n      }, 2000);\n    })\n    .catch((error) => {\n      const errorCode = error.code;\n      const errorMessage = error.message;\n      msg.value = errorCode + \", \" + errorMessage;\n    });\n};\n</script>\n\n<style scoped lang=\"scss\">\n.content {\n  padding: 10px;\n  border: 1px solid #dddddd;\n  background-color: #f5f5f5;\n}\n</style>\n","/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/views/SignInView.vue",[],[],"/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/views/SignUpView.vue",[],"/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/stores/global.ts",["83"],"import { ref, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { defineStore } from \"pinia\";\nimport { getAuth, onAuthStateChanged, signOut } from \"firebase/auth\";\n\nexport const useGlobalStore = defineStore(\"global\", () => {\n  const auth = getAuth();\n  const isLoggedIn = ref(false);\n  const isUser: any = ref(\"\");\n\n  const router = useRouter();\n\n  const handleSignOut = () => {\n    signOut(auth)\n      .then(() => {\n        console.log(\"已登出\");\n        isLoggedIn.value = false;\n        router.push(\"/\");\n      })\n      .catch((error) => {\n        console.log(\"登出失敗\", error);\n      });\n  };\n\n  //判斷會員是否登入\n  onMounted(() => {\n    onAuthStateChanged(auth, (user) => {\n      user\n        ? ((isLoggedIn.value = true), (isUser.value = user))\n        : ((isLoggedIn.value = false), (isUser.value = \"\"));\n    });\n  });\n\n  return { isLoggedIn, isUser, handleSignOut };\n});\n","/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/components/TheHeader.vue",["84","85","86"],"<template>\n  <div class=\"header\">\n    <p>isLogin: {{ global.isLoggedIn }}</p>\n    <p>Uid: {{ global.isUser.uid }}</p>\n    <p>Email: {{ global.isUser.email }}</p>\n    <nav>\n      <router-link to=\"/\">首頁</router-link>\n      <router-link to=\"/mine\" v-if=\"global.isLoggedIn\">我的</router-link>\n      <router-link to=\"/signIn\" v-if=\"!global.isLoggedIn\">登入</router-link>\n      <router-link to=\"/signUp\" v-if=\"!global.isLoggedIn\">註冊</router-link>\n    </nav>\n    <button\n      type=\"button\"\n      @click=\"global.handleSignOut\"\n      v-if=\"global.isLoggedIn\"\n    >\n      登出\n    </button>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useGlobalStore } from \"@/stores/global\";\n\nconst global = useGlobalStore();\n</script>\n\n<style scoped lang=\"scss\">\n@import \"@/assets/scss/variables.scss\";\n\n.header {\n  padding: rem(10);\n  background-color: var(--primary);\n\n  p {\n    color: var(--color-white);\n  }\n}\n\nnav {\n  display: flex;\n  justify-content: center;\n  gap: 10px;\n  width: 100%;\n\n  a {\n    font-weight: bold;\n    color: var(--color-white);\n\n    &.router-link-exact-active {\n      color: var(--secondary);\n    }\n  }\n}\n</style>\n","/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/views/MineView.vue",[],"/Users/peterwumbp2021/Documents/GitHub/fire-practice/src/components/MineTable.vue",["87","88"],"<template>\n  <div class=\"content\">\n    <h3>我的表格</h3>\n    <div class=\"form\">\n      <input type=\"text\" v-model=\"form.name\" placeholder=\"name\" />\n      <input type=\"number\" v-model=\"form.year\" placeholder=\"year\" />\n      <button v-on:click=\"create\">Send</button>\n    </div>\n    <table>\n      <thead>\n        <td>ID</td>\n        <td>Name</td>\n        <td>Year</td>\n        <td>Updater</td>\n        <td></td>\n      </thead>\n      <tbody>\n        <tr v-for=\"i in ans\" :key=\"i\">\n          <td>{{ i.id }}</td>\n          <td>\n            <input type=\"text\" v-model=\"i.name\" />\n          </td>\n          <td>\n            <input type=\"text\" v-model=\"i.year\" />\n          </td>\n          <td>\n            <p>{{ i.updater }}</p>\n          </td>\n          <td>\n            <button @click.stop=\"update(i)\">Update</button>\n            <button @click.stop=\"remove(i)\">Remove</button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { db } from \"@/services/firebase\";\nimport {\n  collection,\n  getDocs,\n  addDoc,\n  onSnapshot,\n  orderBy,\n  query,\n  updateDoc,\n  doc,\n  deleteDoc,\n} from \"firebase/firestore\";\nimport { onMounted, onUnmounted, ref, reactive } from \"vue\";\nimport { useGlobalStore } from \"@/stores/global\";\n\nconst global = useGlobalStore();\nconst ans: any = ref([]);\nlet unsubscribe;\nconst form = reactive({\n  name: ref(\"\"),\n  year: ref(0),\n});\n\nonMounted(() => {\n  const latestQuery = query(collection(db, \"dina\"), orderBy(\"year\", \"desc\"));\n\n  unsubscribe = onSnapshot(latestQuery, (snapshot) => {\n    ans.value = [];\n    snapshot.forEach((doc) => {\n      ans.value.push({\n        id: doc.id,\n        name: doc.data().name,\n        year: doc.data().year,\n        updater: doc.data().updater,\n      });\n    });\n  });\n});\n\nonUnmounted(() => {\n  if (unsubscribe) {\n    unsubscribe();\n  }\n});\n\nconst create = async () => {\n  try {\n    const docRef = await addDoc(collection(db, \"dina\"), {\n      name: form.name,\n      year: form.year,\n      updater: global.isUser.email,\n    });\n    console.log(\"Document written with ID: \", docRef.id);\n  } catch (e) {\n    console.error(\"Error adding document: \", e);\n  } finally {\n    form.name = \"\";\n    form.year = 0;\n  }\n};\n\nconst update = async (e) => {\n  const docRef = doc(db, \"dina\", e.id);\n\n  try {\n    await updateDoc(docRef, {\n      name: e.name,\n      year: e.year,\n      updater: global.isUser.email,\n    });\n  } catch (err) {\n    console.error(\"Error: \", err);\n  }\n};\n\nconst remove = async (e) => {\n  const docRef = doc(db, \"dina\", e.id);\n\n  try {\n    await deleteDoc(docRef);\n  } catch (err) {\n    console.error(\"Error: \", err);\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\n.content {\n  padding: 10px;\n  background-color: var(--color-secondary-bg);\n\n  table {\n    width: 100%;\n\n    td {\n      padding: 5px;\n      border: 1px solid var(--color-border);\n      background-color: var(--color-primary-bg);\n      font-size: 12px;\n    }\n  }\n}\n</style>\n",{"ruleId":"89","severity":1,"message":"90","line":5,"column":10,"nodeType":"91","messageId":"92","endLine":5,"endColumn":17},{"ruleId":"89","severity":1,"message":"93","line":5,"column":19,"nodeType":"91","messageId":"92","endLine":5,"endColumn":37},{"ruleId":"89","severity":1,"message":"94","line":5,"column":39,"nodeType":"91","messageId":"92","endLine":5,"endColumn":46},{"ruleId":"89","severity":1,"message":"95","line":6,"column":10,"nodeType":"91","messageId":"92","endLine":6,"endColumn":13},{"ruleId":"89","severity":1,"message":"96","line":6,"column":15,"nodeType":"91","messageId":"92","endLine":6,"endColumn":24},{"ruleId":"89","severity":1,"message":"97","line":7,"column":10,"nodeType":"91","messageId":"92","endLine":7,"endColumn":19},{"ruleId":"89","severity":1,"message":"98","line":2,"column":10,"nodeType":"91","messageId":"92","endLine":2,"endColumn":24},{"ruleId":"89","severity":1,"message":"99","line":49,"column":30,"nodeType":"91","messageId":"92","endLine":49,"endColumn":34},{"ruleId":"89","severity":1,"message":"100","line":16,"column":7,"nodeType":"91","messageId":"92","endLine":16,"endColumn":16},{"ruleId":"101","severity":1,"message":"102","line":19,"column":12,"nodeType":"103","messageId":"104","endLine":19,"endColumn":15,"suggestions":"105"},{"ruleId":"89","severity":1,"message":"106","line":25,"column":13,"nodeType":"91","messageId":"92","endLine":25,"endColumn":17},{"ruleId":"89","severity":1,"message":"107","line":31,"column":13,"nodeType":"91","messageId":"92","endLine":31,"endColumn":18},{"ruleId":"101","severity":1,"message":"102","line":19,"column":12,"nodeType":"103","messageId":"104","endLine":19,"endColumn":15,"suggestions":"108"},{"ruleId":"89","severity":1,"message":"109","line":24,"column":12,"nodeType":"91","messageId":"92","endLine":24,"endColumn":26},{"ruleId":"101","severity":1,"message":"102","line":9,"column":17,"nodeType":"103","messageId":"104","endLine":9,"endColumn":20,"suggestions":"110"},{"ruleId":"89","severity":1,"message":"95","line":23,"column":10,"nodeType":"91","messageId":"92","endLine":23,"endColumn":13},{"ruleId":"89","severity":1,"message":"96","line":23,"column":15,"nodeType":"91","messageId":"92","endLine":23,"endColumn":24},{"ruleId":"89","severity":1,"message":"97","line":24,"column":10,"nodeType":"91","messageId":"92","endLine":24,"endColumn":19},{"ruleId":"89","severity":1,"message":"111","line":43,"column":3,"nodeType":"91","messageId":"92","endLine":43,"endColumn":10},{"ruleId":"101","severity":1,"message":"102","line":56,"column":12,"nodeType":"103","messageId":"104","endLine":56,"endColumn":15,"suggestions":"112"},"@typescript-eslint/no-unused-vars","'getAuth' is defined but never used.","Identifier","unusedVar","'onAuthStateChanged' is defined but never used.","'signOut' is defined but never used.","'ref' is defined but never used.","'onMounted' is defined but never used.","'useRouter' is defined but never used.","'useGlobalStore' is defined but never used.","'from' is defined but never used.","'analytics' is assigned a value but never used.","@typescript-eslint/no-explicit-any","Unexpected any. Specify a different type.","TSAnyKeyword","unexpectedAny",["113","114"],"'user' is assigned a value but never used.","'error' is defined but never used.",["115","116"],"'userCredential' is defined but never used.",["117","118"],"'getDocs' is defined but never used.",["119","120"],{"messageId":"121","fix":"122","desc":"123"},{"messageId":"124","fix":"125","desc":"126"},{"messageId":"121","fix":"127","desc":"123"},{"messageId":"124","fix":"128","desc":"126"},{"messageId":"121","fix":"129","desc":"123"},{"messageId":"124","fix":"130","desc":"126"},{"messageId":"121","fix":"131","desc":"123"},{"messageId":"124","fix":"132","desc":"126"},"suggestUnknown",{"range":"133","text":"134"},"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct.","suggestNever",{"range":"133","text":"135"},"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of.",{"range":"136","text":"134"},{"range":"136","text":"135"},{"range":"137","text":"134"},{"range":"137","text":"135"},{"range":"138","text":"134"},{"range":"138","text":"135"},[520,523],"unknown","never",[524,527],[321,324],[1310,1313]]