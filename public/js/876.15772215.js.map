{"version":3,"file":"js/876.15772215.js","mappings":"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","sources":["webpack://fire-practice/./src/components/MineTable.vue?32cc","webpack://fire-practice/./src/components/MineTable.vue","webpack://fire-practice/./src/components/MineTable.vue?edfe","webpack://fire-practice/./src/views/MineView.vue?28f3","webpack://fire-practice/./src/views/MineView.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-c0335fac\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"content\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"我的表格\", -1))\nconst _hoisted_3 = { class: \"form\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"thead\", null, [\n  /*#__PURE__*/_createElementVNode(\"td\", null, \"ID\"),\n  /*#__PURE__*/_createElementVNode(\"td\", null, \"Name\"),\n  /*#__PURE__*/_createElementVNode(\"td\", null, \"Year\"),\n  /*#__PURE__*/_createElementVNode(\"td\", null, \"Updater\"),\n  /*#__PURE__*/_createElementVNode(\"td\")\n], -1))\nconst _hoisted_5 = [\"onUpdate:modelValue\"]\nconst _hoisted_6 = [\"onUpdate:modelValue\"]\nconst _hoisted_7 = [\"onClick\"]\nconst _hoisted_8 = [\"onClick\"]\n\nimport { db } from \"@/services/firebase\";\nimport {\n  collection,\n  getDocs,\n  addDoc,\n  onSnapshot,\n  orderBy,\n  query,\n  updateDoc,\n  doc,\n  deleteDoc,\n} from \"firebase/firestore\";\nimport { onMounted, onUnmounted, ref, reactive } from \"vue\";\nimport { useGlobalStore } from \"@/stores/global\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'MineTable',\n  setup(__props) {\n\nconst global = useGlobalStore();\nconst ans: any = ref([]);\nlet unsubscribe;\nconst form = reactive({\n  name: ref(\"\"),\n  year: ref(0),\n});\n\nonMounted(() => {\n  const latestQuery = query(collection(db, \"dina\"), orderBy(\"year\", \"desc\"));\n\n  unsubscribe = onSnapshot(latestQuery, (snapshot) => {\n    ans.value = [];\n    snapshot.forEach((doc) => {\n      ans.value.push({\n        id: doc.id,\n        name: doc.data().name,\n        year: doc.data().year,\n        updater: doc.data().updater,\n      });\n    });\n  });\n});\n\nonUnmounted(() => {\n  if (unsubscribe) {\n    unsubscribe();\n  }\n});\n\nconst create = async () => {\n  try {\n    const docRef = await addDoc(collection(db, \"dina\"), {\n      name: form.name,\n      year: form.year,\n      updater: global.isUser.email,\n    });\n    console.log(\"Document written with ID: \", docRef.id);\n  } catch (e) {\n    console.error(\"Error adding document: \", e);\n  } finally {\n    form.name = \"\";\n    form.year = 0;\n  }\n};\n\nconst update = async (e) => {\n  const docRef = doc(db, \"dina\", e.id);\n\n  try {\n    await updateDoc(docRef, {\n      name: e.name,\n      year: e.year,\n      updater: global.isUser.email,\n    });\n  } catch (err) {\n    console.error(\"Error: \", err);\n  }\n};\n\nconst remove = async (e) => {\n  const docRef = doc(db, \"dina\", e.id);\n\n  try {\n    await deleteDoc(docRef);\n  } catch (err) {\n    console.error(\"Error: \", err);\n  }\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _hoisted_2,\n    _createElementVNode(\"div\", _hoisted_3, [\n      _withDirectives(_createElementVNode(\"input\", {\n        type: \"text\",\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((form.name) = $event)),\n        placeholder: \"name\"\n      }, null, 512), [\n        [_vModelText, form.name]\n      ]),\n      _withDirectives(_createElementVNode(\"input\", {\n        type: \"number\",\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((form.year) = $event)),\n        placeholder: \"year\"\n      }, null, 512), [\n        [_vModelText, form.year]\n      ]),\n      _createElementVNode(\"button\", { onClick: create }, \"Send\")\n    ]),\n    _createElementVNode(\"table\", null, [\n      _hoisted_4,\n      _createElementVNode(\"tbody\", null, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(ans.value, (i) => {\n          return (_openBlock(), _createElementBlock(\"tr\", { key: i }, [\n            _createElementVNode(\"td\", null, _toDisplayString(i.id), 1),\n            _createElementVNode(\"td\", null, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"text\",\n                \"onUpdate:modelValue\": ($event: any) => ((i.name) = $event)\n              }, null, 8, _hoisted_5), [\n                [_vModelText, i.name]\n              ])\n            ]),\n            _createElementVNode(\"td\", null, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"text\",\n                \"onUpdate:modelValue\": ($event: any) => ((i.year) = $event)\n              }, null, 8, _hoisted_6), [\n                [_vModelText, i.year]\n              ])\n            ]),\n            _createElementVNode(\"td\", null, [\n              _createElementVNode(\"p\", null, _toDisplayString(i.updater), 1)\n            ]),\n            _createElementVNode(\"td\", null, [\n              _createElementVNode(\"button\", {\n                onClick: _withModifiers(($event: any) => (update(i)), [\"stop\"])\n              }, \"Update\", 8, _hoisted_7),\n              _createElementVNode(\"button\", {\n                onClick: _withModifiers(($event: any) => (remove(i)), [\"stop\"])\n              }, \"Remove\", 8, _hoisted_8)\n            ])\n          ]))\n        }), 128))\n      ])\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"content\">\n    <h3>我的表格</h3>\n    <div class=\"form\">\n      <input type=\"text\" v-model=\"form.name\" placeholder=\"name\" />\n      <input type=\"number\" v-model=\"form.year\" placeholder=\"year\" />\n      <button v-on:click=\"create\">Send</button>\n    </div>\n    <table>\n      <thead>\n        <td>ID</td>\n        <td>Name</td>\n        <td>Year</td>\n        <td>Updater</td>\n        <td></td>\n      </thead>\n      <tbody>\n        <tr v-for=\"i in ans\" :key=\"i\">\n          <td>{{ i.id }}</td>\n          <td>\n            <input type=\"text\" v-model=\"i.name\" />\n          </td>\n          <td>\n            <input type=\"text\" v-model=\"i.year\" />\n          </td>\n          <td>\n            <p>{{ i.updater }}</p>\n          </td>\n          <td>\n            <button @click.stop=\"update(i)\">Update</button>\n            <button @click.stop=\"remove(i)\">Remove</button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { db } from \"@/services/firebase\";\nimport {\n  collection,\n  getDocs,\n  addDoc,\n  onSnapshot,\n  orderBy,\n  query,\n  updateDoc,\n  doc,\n  deleteDoc,\n} from \"firebase/firestore\";\nimport { onMounted, onUnmounted, ref, reactive } from \"vue\";\nimport { useGlobalStore } from \"@/stores/global\";\n\nconst global = useGlobalStore();\nconst ans: any = ref([]);\nlet unsubscribe;\nconst form = reactive({\n  name: ref(\"\"),\n  year: ref(0),\n});\n\nonMounted(() => {\n  const latestQuery = query(collection(db, \"dina\"), orderBy(\"year\", \"desc\"));\n\n  unsubscribe = onSnapshot(latestQuery, (snapshot) => {\n    ans.value = [];\n    snapshot.forEach((doc) => {\n      ans.value.push({\n        id: doc.id,\n        name: doc.data().name,\n        year: doc.data().year,\n        updater: doc.data().updater,\n      });\n    });\n  });\n});\n\nonUnmounted(() => {\n  if (unsubscribe) {\n    unsubscribe();\n  }\n});\n\nconst create = async () => {\n  try {\n    const docRef = await addDoc(collection(db, \"dina\"), {\n      name: form.name,\n      year: form.year,\n      updater: global.isUser.email,\n    });\n    console.log(\"Document written with ID: \", docRef.id);\n  } catch (e) {\n    console.error(\"Error adding document: \", e);\n  } finally {\n    form.name = \"\";\n    form.year = 0;\n  }\n};\n\nconst update = async (e) => {\n  const docRef = doc(db, \"dina\", e.id);\n\n  try {\n    await updateDoc(docRef, {\n      name: e.name,\n      year: e.year,\n      updater: global.isUser.email,\n    });\n  } catch (err) {\n    console.error(\"Error: \", err);\n  }\n};\n\nconst remove = async (e) => {\n  const docRef = doc(db, \"dina\", e.id);\n\n  try {\n    await deleteDoc(docRef);\n  } catch (err) {\n    console.error(\"Error: \", err);\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\n.content {\n  padding: 10px;\n  background-color: var(--color-secondary-bg);\n\n  table {\n    width: 100%;\n\n    td {\n      padding: 5px;\n      border: 1px solid var(--color-border);\n      background-color: var(--color-primary-bg);\n      font-size: 12px;\n    }\n  }\n}\n</style>\n","import script from \"./MineTable.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MineTable.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MineTable.vue?vue&type=style&index=0&id=c0335fac&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c0335fac\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"p\", null, \"Welcome to Mine\", -1)\n\nimport MineTable from \"@/components/MineTable.vue\";\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'MineView',\n  setup(__props) {\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _hoisted_1,\n    _createVNode(MineTable)\n  ], 64))\n}\n}\n\n})","import script from \"./MineView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MineView.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_createElementVNode","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_defineComponent","__name","setup","__props","global","useGlobalStore","ans","ref","unsubscribe","form","reactive","name","year","onMounted","latestQuery","query","collection","db","orderBy","onSnapshot","snapshot","value","forEach","doc","push","id","data","updater","onUnmounted","create","async","docRef","addDoc","isUser","email","console","log","e","error","update","updateDoc","err","remove","deleteDoc","_ctx","_cache","_openBlock","_createElementBlock","_withDirectives","type","$event","placeholder","_vModelText","onClick","_Fragment","_renderList","i","key","_toDisplayString","_withModifiers","__exports__","_createVNode","MineTable"],"sourceRoot":""}